<%- include('partials/header', { title: 'Kochi Metro Decision System' }) %>

<h1 class="mb-4">Nightly Train Deployment Dashboard</h1>

<form action="/process-input" method="POST">

  <!-- 1. Fitness Certificates -->
  <fieldset class="mb-3 border p-3 rounded">
    <legend>Fitness Certificates</legend>
    <div class="form-check">
      <input type="radio" name="rollingStock" value="valid" checked>
      <label>Rolling Stock ✅ Valid</label>
    </div>
    <div class="form-check">
      <input type="radio" name="rollingStock" value="expired">
      <label>Rolling Stock ❌ Expired</label>
    </div>
    <div class="form-check mt-2">
      <input type="radio" name="signalling" value="valid" checked>
      <label>Signalling ✅ Valid</label>
    </div>
    <div class="form-check">
      <input type="radio" name="signalling" value="expired">
      <label>Signalling ❌ Expired</label>
    </div>
    <div class="form-check mt-2">
      <input type="radio" name="telecom" value="valid" checked>
      <label>Telecom ✅ Valid</label>
    </div>
    <div class="form-check">
      <input type="radio" name="telecom" value="expired">
      <label>Telecom ❌ Expired</label>
    </div>
  </fieldset>

  <!-- 2. Job-card / Maintenance -->
  <fieldset class="mb-3 border p-3 rounded">
    <legend>Maintenance Status</legend>
    <label>Open Work Orders</label>
    <input type="number" name="openWorkOrders" class="form-control" min="0">

    <label class="mt-2">Job Type</label>
    <select name="jobType" class="form-select">
      <option value="minor">Minor</option>
      <option value="major">Major</option>
      <option value="safety">Safety</option>
    </select>

    <label class="mt-2">Estimated Completion</label>
    <input type="text" name="completionTime" class="form-control" placeholder="hrs/days">
  </fieldset>

  <!-- 3. Branding Commitments -->
  <fieldset class="mb-3 border p-3 rounded">
    <legend>Branding / Commercial</legend>
    <label>Campaign ID</label>
    <select name="brandingId" class="form-select">
      <option value="C101">C101</option>
      <option value="C102">C102</option>
    </select>

    <label class="mt-2">Contract Hours Left</label>
    <input type="number" name="contractHours" class="form-control">

    <label class="mt-2">Priority</label>
    <select name="priority" class="form-select">
      <option value="High">High</option>
      <option value="Medium">Medium</option>
      <option value="Low">Low</option>
    </select>
  </fieldset>

  <!-- 4. Mileage / Usage -->
  <fieldset class="mb-3 border p-3 rounded">
    <legend>Mileage & Usage</legend>
    <label>Total KM</label>
    <input type="number" name="totalKm" class="form-control" readonly value="0">

    <label class="mt-2">KM Since Last Maintenance</label>
    <input type="number" name="kmSinceMaintenance" class="form-control" readonly value="0">

    <label class="mt-2">Supervisor Adjustment</label>
    <input type="number" name="supervisorKmAdjust" class="form-control">
  </fieldset>

  <!-- 5. Cleaning Slots -->
  <fieldset class="mb-3 border p-3 rounded">
    <legend>Cleaning & Detailing</legend>
    <label>Last Basic Cleaning</label>
    <input type="text" name="lastBasicClean" class="form-control" placeholder="YYYY-MM-DD">

    <label class="mt-2">Last Deep Cleaning</label>
    <input type="text" name="lastDeepClean" class="form-control" placeholder="YYYY-MM-DD">

    <label class="mt-2">Cleaning Slot Tonight</label>
    <select name="cleaningSlot" class="form-select">
      <option value="Slot 1">Slot 1</option>
      <option value="Slot 2">Slot 2</option>
    </select>
  </fieldset>

  <!-- 6. Stabling / Depot Positions -->
  <fieldset class="mb-3 border p-3 rounded">
    <legend>Stabling / Depot</legend>
    <label>Depot Position</label>
    <input type="text" name="position" class="form-control" placeholder="Bay / Track">

    <div class="form-check mt-2">
      <input type="checkbox" name="minimizeShunting">
      <label>Minimize Shunting</label>
    </div>
  </fieldset>

  <!-- Manual Overrides / Notes -->
  <fieldset class="mb-3 border p-3 rounded">
    <legend>Manual Overrides & Notes</legend>
    <div class="form-check">
      <input type="checkbox" name="forceService">
      <label>Force Train Into Service</label>
    </div>
    <div class="form-check">
      <input type="checkbox" name="holdDepot">
      <label>Hold Train in Depot</label>
    </div>
    <label class="mt-2">Notes / Comments</label>
    <textarea name="notes" class="form-control" rows="2"></textarea>
  </fieldset>

  <button type="submit" class="btn btn-primary mb-4">Submit Decisions</button>
</form>

<hr>

<!-- Ranked Output -->
<div id="output">
  <!-- ML/Rules suggested Run/Backup/Maintenance list will appear here -->
</div>

<%- include('partials/footer') %>
